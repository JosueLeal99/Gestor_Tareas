<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tareas</title>
</head>
<body style="background-color: #683475">
    <div style="text-align: center; margin-top: 50px;">
        <h1 style="color: #ffffff">Tareas</h1>

        <form action="/tasks" method="post" style="margin-bottom: 30px; text-align: left; display: inline-block;">
            <div style="margin-bottom: 15px;">
                <label style="color: #ffffff" for="titulo">Nombre de la Tarea:</label><br>
                <input type="text" name="titulo" placeholder="Nueva Tarea" required style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px;">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="color: #ffffff" for="descripcion">Descripción:</label><br>
                <textarea name="descripcion" placeholder="Descripción de la tarea" style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px;"></textarea>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="color: #ffffff" for="fecha_vencimiento">Fecha de Vencimiento:</label><br>
                <input type="date" name="fecha_vencimiento" required style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px;">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="color: #ffffff" for="etiqueta">Etiqueta:</label><br>
                <input type="text" name="etiqueta" placeholder="Etiqueta" style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px;">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="color: #ffffff" for="estado">Estado:</label><br>
                <select name="estado" style="width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px;">
                    <option value="pendiente">Pendiente</option>
                    <option value="completada">Completada</option>
                </select>
            </div>
            <button type="submit" style="padding: 10px 15px; border: none; background-color: #007bff; color: white; border-radius: 5px; cursor: pointer;">Agregar Tarea</button>
        </form>
		
		<div style="margin-bottom: 20px;">
            <a href="/tasks?order=fecha_vencimiento" style="text-decoration: none; padding: 10px 15px; background-color: #007bff; color: white; border-radius: 5px; margin-right: 10px;">Ordenar por Fecha</a>
            <a href="/tasks?order=etiqueta" style="text-decoration: none; padding: 10px 15px; background-color: #007bff; color: white; border-radius: 5px;">Ordenar por Etiqueta</a>
        </div>

        <ul style="list-style-type: none; padding: 0;">
            <% @tareas.each do |tarea| %>
                <li style="margin-bottom: 20px;">
                    <strong style="color: #ffffff"><%= tarea.titulo %> - <%= tarea.descripcion %> - <%= tarea.fecha_vencimiento %> - <%= tarea.etiqueta %></strong>
                    <% if tarea.estado %>
                        <strong style="color: #ffffff">(Completada)</strong>
                    <% end %>
                    <form action="/tasks/<%= tarea.id %>/toggle" method="post" style="display:inline;">
                        <button type="submit" style="padding: 5px 10px; border: none; background-color: #ffc107; color: white; border-radius: 5px; cursor: pointer;">
                            <%= tarea.estado ? 'Marcar como pendiente' : 'Marcar como completada' %>
                        </button>
                    </form>
                    <a href="/tasks/<%= tarea.id %>/edit" style="padding: 5px 10px; background-color: orange; color: white; border-radius: 5px; text-decoration: none; margin-left: 10px;">Editar</a>
                    <form action="/tasks/<%= tarea.id %>/delete" method="post" style="display:inline;">
                        <button type="submit" style="padding: 5px 10px; border: none; background-color: #dc3545; color: white; border-radius: 5px; cursor: pointer;">Eliminar</button>
                    </form>
                </li>
            <% end %>
        </ul>

        <a href="/logout" style="display: inline-block; margin-top: 30px; text-decoration: none; color: #ffffff;">Cerrar Sesión</a>
    </div>
</body>
</html>
